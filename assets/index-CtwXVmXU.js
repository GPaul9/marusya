const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-D10-lvvB.js","assets/index-BN60JNKn.js","assets/index-BJAEarv4.css","assets/custom-media-element-Ce0vsE-t.js","assets/hls-C2H8_kF5.js","assets/react-BEntQP3y.js","assets/index-DAbVBSI7.js","assets/react-DZZpaw0c.js","assets/react-BMtRpRuB.js","assets/react-Caa_K_8N.js","assets/react-MpC0bYuq.js","assets/react-D45Ompqw.js","assets/react-qEGfhyF8.js","assets/Preview-CVTAlN6v.js"])))=>i.map(i=>d[i]);
import{R as h,r as l,_ as d,p as Y,j as t,M as q,q as K,m as f,s as G,t as J,L as Q,v as ee}from"./index-BN60JNKn.js";const te="_trailer__modal_17426_2",ae="_trailer__btn_17426_7",re="_trailer__wrapper_17426_33",le="_trailer__title_17426_47",ie="_trailer__loader_17426_89",y={trailer__modal:te,trailer__btn:ae,trailer__wrapper:re,trailer__title:le,"trailer__control-icon":"_trailer__control-icon_17426_69",trailer__loader:ie},U=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,M=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,H=/\.(m3u8)($|\?)/i,ne=/\.(mpd)($|\?)/i,se=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,oe=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,ce=/vimeo\.com\/(?!progressive_redirect).+/,_e=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,me=/open\.spotify\.com\/(\w+)\/(\w+)/i,ve=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,ue=/tiktok\.com\/(?:@[^/]+\/video\/)?(\d+)(?:\/([\w-]+))?/,I=(e,a)=>{if(Array.isArray(e)){for(const i of e)if(typeof i=="string"&&I(i,a)||I(i.src,a))return!0;return!1}return a(e)},u={html:e=>I(e,a=>U.test(a)||M.test(a)),hls:e=>I(e,a=>H.test(a)),dash:e=>I(e,a=>ne.test(a)),mux:e=>se.test(e),youtube:e=>oe.test(e),vimeo:e=>ce.test(e)&&!M.test(e)&&!H.test(e),wistia:e=>_e.test(e),spotify:e=>me.test(e),twitch:e=>ve.test(e),tiktok:e=>ue.test(e)},de=h.forwardRef((e,a)=>{const i=U.test(`${e.src}`)?"audio":"video";return h.createElement(i,{...e,ref:a},e.children)});var ye=de;const he=[{key:"hls",name:"hls.js",canPlay:u.hls,canEnablePIP:()=>!0,player:l.lazy(()=>d(()=>import("./react-D10-lvvB.js"),__vite__mapDeps([0,1,2,3,4])))},{key:"dash",name:"dash.js",canPlay:u.dash,canEnablePIP:()=>!0,player:l.lazy(()=>d(()=>import("./react-BEntQP3y.js"),__vite__mapDeps([5,1,2,3])))},{key:"mux",name:"Mux",canPlay:u.mux,canEnablePIP:()=>!0,player:l.lazy(()=>d(()=>import("./index-DAbVBSI7.js"),__vite__mapDeps([6,1,2,4,3])))},{key:"youtube",name:"YouTube",canPlay:u.youtube,player:l.lazy(()=>d(()=>import("./react-DZZpaw0c.js"),__vite__mapDeps([7,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:u.vimeo,player:l.lazy(()=>d(()=>import("./react-BMtRpRuB.js"),__vite__mapDeps([8,1,2])))},{key:"wistia",name:"Wistia",canPlay:u.wistia,canEnablePIP:()=>!0,player:l.lazy(()=>d(()=>import("./react-Caa_K_8N.js"),__vite__mapDeps([9,1,2])))},{key:"spotify",name:"Spotify",canPlay:u.spotify,canEnablePIP:()=>!1,player:l.lazy(()=>d(()=>import("./react-MpC0bYuq.js"),__vite__mapDeps([10,1,2])))},{key:"twitch",name:"Twitch",canPlay:u.twitch,canEnablePIP:()=>!1,player:l.lazy(()=>d(()=>import("./react-D45Ompqw.js"),__vite__mapDeps([11,1,2])))},{key:"tiktok",name:"TikTok",canPlay:u.tiktok,canEnablePIP:()=>!1,player:l.lazy(()=>d(()=>import("./react-qEGfhyF8.js"),__vite__mapDeps([12,1,2])))},{key:"html",name:"html",canPlay:u.html,canEnablePIP:()=>!0,player:ye}];var A=he;const pe={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},D=h.forwardRef((e,a)=>{const{playing:i,pip:_}=e,s=e.activePlayer,n=l.useRef(null),o=l.useRef(!0);l.useEffect(()=>{var c,m;n.current&&(n.current.paused&&i===!0&&n.current.play(),!n.current.paused&&i===!1&&n.current.pause(),n.current.playbackRate=(c=e.playbackRate)!=null?c:1,n.current.volume=(m=e.volume)!=null?m:1)}),l.useEffect(()=>{var c,m,v,E,j;if(!(!n.current||!globalThis.document)){if(_&&!document.pictureInPictureElement)try{(m=(c=n.current).requestPictureInPicture)==null||m.call(c)}catch{}if(!_&&document.pictureInPictureElement)try{(E=(v=n.current).exitPictureInPicture)==null||E.call(v),(j=document.exitPictureInPicture)==null||j.call(document)}catch{}}},[_]);const w=c=>{var m,v;o.current=!0,(m=e.onReady)==null||m.call(e),(v=e.onLoadStart)==null||v.call(e,c)},g=c=>{var m,v;o.current&&(o.current=!1,(m=e.onStart)==null||m.call(e,c)),(v=e.onPlay)==null||v.call(e,c)};if(!s)return null;const p={};for(const c in e)c.startsWith("on")&&(p[c]=e[c]);return h.createElement(s,{...p,style:e.style,className:e.className,slot:e.slot,ref:l.useCallback(c=>{n.current=c,typeof a=="function"?a(c):a!==null&&(a.current=c)},[a]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:w,onPlay:g},e.children)});D.displayName="Player";var fe=D;const Pe=l.lazy(()=>d(()=>import("./Preview-CVTAlN6v.js"),__vite__mapDeps([13,1,2]))),k=[],we=(e,a)=>{const i=s=>{for(const n of[...k,...e])if(s&&n.canPlay(s))return n;return a||null},_=h.forwardRef((s,n)=>{const o={...pe,...s},{src:w,slot:g,className:p,style:c,width:m,height:v,fallback:E,wrapper:j}=o,[C,R]=l.useState(!!o.light);l.useEffect(()=>{o.light?R(!0):R(!1)},[o.light]);const z=b=>{var P;R(!1),(P=o.onClickPreview)==null||P.call(o,b)},$=b=>{if(!b)return null;const{light:P,playIcon:N,previewTabIndex:x,oEmbedUrl:T,previewAriaLabel:L}=o;return h.createElement(Pe,{src:b,light:P,playIcon:N,previewTabIndex:x,previewAriaLabel:L,oEmbedUrl:T,onClickPreview:z})},B=b=>{var P,N;const x=i(b);if(!x)return null;const{style:T,width:L,height:W,wrapper:S}=o,X=(P=o.config)==null?void 0:P[x.key];return h.createElement(fe,{...o,ref:n,activePlayer:(N=x.player)!=null?N:x,slot:S?void 0:g,className:S?void 0:p,style:S?{display:"block",width:"100%",height:"100%"}:{display:"block",width:L,height:W,...T},config:X})},F=j??V,Z=E===!1?V:l.Suspense;return h.createElement(F,{slot:g,className:p,style:{width:m,height:v,...c}},h.createElement(Z,{fallback:E},C?$(w):B(w)))});return _.displayName="ReactPlayer",_.addCustomPlayer=s=>{k.push(s)},_.removeCustomPlayers=()=>{k.length=0},_.canPlay=s=>{if(s){for(const n of[...k,...e])if(n.canPlay(s))return!0}return!1},_.canEnablePIP=s=>{var n;if(s){for(const o of[...k,...e])if(o.canPlay(s)&&((n=o.canEnablePIP)!=null&&n.call(o)))return!0}return!1},_},V=({children:e})=>e,ge=A[A.length-1];var be=we(A,ge);const xe=e=>l.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M6 3H8V21H6V3ZM16 3H18V21H16V3Z"})),O=e=>l.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M6 20.1957V3.80421C6 3.01878 6.86395 2.53993 7.53 2.95621L20.6432 11.152C21.2699 11.5436 21.2699 12.4563 20.6432 12.848L7.53 21.0437C6.86395 21.46 6 20.9812 6 20.1957Z"})),Ee=({movieData:e})=>{const{trailerUrl:a,title:i}=e,_=Y(),[s,n]=l.useState(!0),[o,w]=l.useState(!0),[g,p]=l.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx("button",{className:y.trailer__btn,onClick:_.open,children:"Трейлер"}),_.isOpen&&t.jsx(q,{position:"center",onClose:_.close,className:y.trailer__modal,children:t.jsxs("div",{className:y.trailer__wrapper,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[o&&t.jsx("div",{className:y.trailer__loader}),t.jsx(be,{className:y.trailer__screen,src:a,controls:!1,playing:s,onReady:()=>w(!1),onPause:()=>n(!1),onPlay:()=>n(!0),width:"100%",height:"100%",playIcon:t.jsx(O,{className:y["trailer__control-icon"]}),config:{youtube:{rel:0}}}),s===!1&&t.jsx("div",{className:y.trailer__title,children:i}),s===!1&&t.jsx(t.Fragment,{children:g===!0?t.jsx(O,{className:y["trailer__control-icon"]}):t.jsx(xe,{className:y["trailer__control-icon"]})}),s===!1&&t.jsx(K,{onClose:_.close})]})})]})},je="_movie_1vg7y_1",ke="_movie__data_1vg7y_24",Ie="_movie__meta_1vg7y_37",Ne="_movie__title_1vg7y_45",Ce="_movie__description_1vg7y_52",Re="_movie__btn_1vg7y_56",Te="_movie__poster_1vg7y_142",Le="_skeleton_1vg7y_165",r={movie:je,"movie__info-wrapper":"_movie__info-wrapper_1vg7y_12",movie__data:ke,movie__meta:Ie,movie__title:Ne,movie__description:Ce,"movie__btn-wrapper":"_movie__btn-wrapper_1vg7y_56","movie__btn-wrapper_preview-layout":"_movie__btn-wrapper_preview-layout_1vg7y_72","movie__btn-about":"_movie__btn-about_1vg7y_80",movie__btn:Re,"movie__btn-icon":"_movie__btn-icon_1vg7y_138","movie__poster-wrapper":"_movie__poster-wrapper_1vg7y_142",movie__poster:Te,skeleton:Le},Se=()=>t.jsxs("div",{className:r.movie,children:[t.jsxs("div",{className:r["movie__info-wrapper"],children:[t.jsxs("div",{className:r.movie__data,children:[t.jsxs("div",{className:r.movie__meta,children:[t.jsx(f,{containerClassName:r.skeleton,height:32}),t.jsx(f,{containerClassName:r.skeleton,height:32}),t.jsx(f,{containerClassName:r.skeleton,height:32}),t.jsx(f,{containerClassName:r.skeleton,height:32})]}),t.jsx("h1",{className:r.movie__title,children:t.jsx(f,{containerClassName:r.skeleton,count:2})}),t.jsx("p",{className:r.movie__description,children:t.jsx(f,{containerClassName:r.skeleton,count:2})})]}),t.jsx("div",{children:t.jsx(f,{containerClassName:r.skeleton,height:56})})]}),t.jsx("div",{className:r.movie__poster,children:t.jsx(f,{height:"100%"})})]}),Ae=e=>l.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},l.createElement("path",{d:"M12 4C14.7486 4 17.1749 5.38626 18.6156 7.5H16V9.5H22V3.5H20V5.99936C18.1762 3.57166 15.2724 2 12 2C6.47715 2 2 6.47715 2 12H4C4 7.58172 7.58172 4 12 4ZM20 12C20 16.4183 16.4183 20 12 20C9.25144 20 6.82508 18.6137 5.38443 16.5H8V14.5H2V20.5H4V18.0006C5.82381 20.4283 8.72764 22 12 22C17.5228 22 22 17.5228 22 12H20Z",fill:"white"})),He=({dataQuery:e,mode:a})=>{const{data:i,isLoading:_,refetch:s}=e;return _||!i?t.jsx(Se,{}):t.jsxs("section",{className:r.movie,children:[t.jsxs("div",{className:r["movie__info-wrapper"],children:[t.jsxs("div",{className:r.movie__data,children:[t.jsxs("div",{className:r.movie__meta,children:[t.jsx(G,{ratingValue:i.tmdbRating}),t.jsx("span",{children:i.releaseYear}),t.jsx("span",{children:i.genres[0]}),t.jsx("span",{children:J(i.runtime)})]}),t.jsx("h1",{className:r.movie__title,children:i.title}),t.jsx("p",{className:r.movie__description,children:i.plot})]}),t.jsxs("div",{className:`${r["movie__btn-wrapper"]} ${a==="preview"?r["movie__btn-wrapper_preview-layout"]:""}`,children:[t.jsx(Ee,{movieData:i}),a==="preview"&&t.jsx(Q,{to:`/${i.id}`,className:r["movie__btn-about"],children:"О фильме"}),t.jsx(ee,{movieId:i.id}),a==="preview"&&t.jsx("button",{className:r.movie__btn,onClick:()=>s(),children:t.jsx(Ae,{className:r["movie__btn-icon"]})})]})]}),i.backdropUrl&&t.jsx("div",{className:r["movie__poster-wrapper"],children:t.jsx("img",{className:r.movie__poster,src:i.backdropUrl,alt:i.title,fetchPriority:"high"})})]})};export{He as default};
